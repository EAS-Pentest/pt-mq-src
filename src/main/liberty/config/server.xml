<?xml version="1.0" encoding="UTF-8"?>
<server description="new server">

    <featureManager>
        <!--<feature>jakartaee-9.1</feature>-->
	<feature>jakartaee-10.0</feature>
	<!--jakarta only -->    
	<feature>wmqMessagingClient-3.0</feature>
    </featureManager>
	
    <!-- START JMS CONFIGURATION -->

    <!-- Real projects should make it secure -->
    <!--	
    <variable name="ibmmq.username" value="app"/>
    <variable name="ibmmq.password" value="passw0rd"/>
    -->
    <!-- OL 
    <resourceAdapter id="wmqjmsra" location="${wlp.install.dir}../../../ibm/wmq.jakarta.jmsra.rar" />
    -->

    <include location="${shared.resource.dir}/ease/mq/jakarta-ra.xml"/>
	
    <!-- <jmsConnectionFactory jndiName="jms/wmqCF" connectionManagerRef="ConMgr6">-->
    <jmsConnectionFactory jndiName="jms/wmqCF" connectionManagerRef="mqConnMgr">      
     <!-- <properties.wmqjmsra for OL -->
       <properties.wmqJms      
	    transportType="CLIENT"	
	    channel="CLOUD.APP.SVRCONN"	 
	    hostName="${mqHostName}"
            port="${mqPort}"	
            queueManager="${mqManagerName}"
            userName="${mqAppUserName}"
            password="${mqAppUserPwd}"/>
    </jmsConnectionFactory>

     <!--sslCipherSuite="TLS_AES_128_GCM_SHA256" -->
     <!-- channel="DEV.APP.SVRCONN" 
	  hostName="localhost"
          port="1414"
	  userName="${ibmmq.username}"
          password="${ibmmq.password}"
          queueManager="QM1"
     -->
	
    <!-- <connectionManager id="ConMgr6" maxPoolSize="10"/> -->
    <connectionManager id="mqConnMgr" maxPoolSize="2"/>
    <jmsActivationSpec id="libertymq/SampleListenerMDB">
        <!-- <properties.wmqjmsra for OL -->
	<properties.wmqJms
	    transportType="CLIENT"		
            channel="CLOUD.APP.SVRCONN"
	    hostName="${mqHostName}"
            port="${mqPort}"	
            queueManager="${mqManagerName}"
            sslCipherSuite="TLS_AES_128_GCM_SHA256"
            userName="${mqAppUserName}"
            password="${mqAppUserPwd}"
            destinationRef="jms/queue1"
            destinationType="jakarta.jms.Queue" />
	</jmsActivationSpec>

    <jmsQueue id="jms/queue1" jndiName="jms/queue1">
        <properties.wmqJms baseQueueName="DEV.QUEUE.1"/>
    </jmsQueue>
	
    <!-- properties.wmqjmsra baseQueueName="DEV.QUEUE.1" /> for OL -->
	 
    <!-- END JMS CONFIGURATION -->


    <basicRegistry id="basic" realm="BasicRealm" />

    <httpEndpoint id="defaultHttpEndpoint"
                  httpPort="9080"
                  httpsPort="9443"
                  host="*" />

    <applicationManager autoExpand="true"/>

    <webApplication contextRoot="/libertymq" location="libertymq.war" />

    <ssl id="defaultSSLConfig" trustDefaultCerts="true" />
</server>
